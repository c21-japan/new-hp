<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>マンション売却マッチング | センチュリー21ホームマート</title>
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700;900&display=swap" rel="stylesheet"/>
    
    <style>
        :root{
            --gold:#A19276; 
            --gold2:#B8A082; 
            --black:#383635; 
            --ink:#222; 
            --cream:#F8F6F3; 
            --bg:#fff;
            --max:1200px; 
            --shadow:0 8px 24px rgba(0,0,0,.08);
            --accent-pink: #FFB6C1;
            --accent-blue: #4A90E2;
            --accent-green: #90EE90;
            --accent-red: #FF6B6B;
        }
        
        *{box-sizing:border-box}
        html,body{margin:0;background:var(--bg);color:var(--ink);font-family:'Noto Sans JP',sans-serif;line-height:1.6}
        a{color:inherit;text-decoration:none}
        img{max-width:100%;display:block;height:auto}
        .container{max-width:var(--max);margin:0 auto;padding:0 16px}
        section{padding:60px 0}
        
        .site-header{
            background:#fff;
            border-bottom:2px solid var(--gold);
            padding:16px 0;
            position:sticky;
            top:0;
            z-index:100;
            box-shadow:0 2px 8px rgba(0,0,0,.08);
        }
        .header-content{
            display:flex;
            justify-content:space-between;
            align-items:center;
            flex-wrap:wrap;
            gap:16px;
        }
        .logo{
            display:flex;
            align-items:center;
            gap:12px;
        }
        .logo img{
            height:40px;
        }
        .nav-menu{
            display:flex;
            gap:24px;
            align-items:center;
        }
        .nav-menu a{
            font-weight:600;
            transition:color 0.3s;
        }
        .nav-menu a:hover{
            color:var(--gold);
        }
        .tel-btn{
            background:linear-gradient(135deg,var(--gold),var(--gold2));
            color:#fff;
            padding:8px 16px;
            border-radius:8px;
            font-weight:700;
            display:inline-flex;
            align-items:center;
            gap:8px;
        }
        
        .page-header{
            background:linear-gradient(135deg,var(--cream),#fff);
            padding:80px 0 60px;
            text-align:center;
            position:relative;
            overflow:hidden;
        }
        .page-header::before{
            content:'';
            position:absolute;
            top:-50%;
            right:-50%;
            width:200%;
            height:200%;
            background:radial-gradient(circle,rgba(161,146,118,0.05),transparent);
            animation:rotate 30s linear infinite;
        }
        @keyframes rotate{
            from{transform:rotate(0deg)}
            to{transform:rotate(360deg)}
        }
        .page-title{
            font-size:clamp(32px,5vw,48px);
            font-weight:900;
            margin-bottom:16px;
            position:relative;
            z-index:1;
        }
        .gold-accent{
            background:linear-gradient(135deg,var(--gold),var(--gold2));
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            background-clip:text;
        }
        .page-subtitle{
            color:#666;
            font-size:18px;
            position:relative;
            z-index:1;
        }
        
        .stats-section{
            margin-top:-40px;
            position:relative;
            z-index:10;
        }
        .stats-grid{
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
            gap:24px;
            max-width:900px;
            margin:0 auto;
        }
        .stat-card{
            background:#fff;
            padding:32px;
            border-radius:16px;
            text-align:center;
            box-shadow:var(--shadow);
            border-top:4px solid var(--gold);
        }
        .stat-number{
            font-size:42px;
            font-weight:900;
            background:linear-gradient(135deg,var(--gold),var(--gold2));
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            background-clip:text;
            margin-bottom:8px;
        }
        .stat-label{
            font-size:14px;
            color:#666;
            font-weight:600;
        }
        
        .search-section{
            padding:80px 0;
            background:var(--cream);
        }
        .search-container{
            max-width:800px;
            margin:0 auto;
            text-align:center;
        }
        .search-title{
            font-size:24px;
            font-weight:900;
            margin-bottom:32px;
            color:var(--black);
        }
        .search-box{
            display:flex;
            gap:12px;
            margin-bottom:24px;
            position:relative;
        }
        .search-input{
            flex:1;
            padding:16px 20px;
            border:2px solid #E0E0E0;
            border-radius:10px;
            font-size:16px;
            transition:all 0.3s;
        }
        .search-input:focus{
            outline:none;
            border-color:var(--gold);
            box-shadow:0 0 0 3px rgba(161,146,118,0.1);
        }
        .search-button{
            padding:16px 32px;
            background:linear-gradient(135deg,var(--gold),var(--gold2));
            color:#fff;
            border:none;
            border-radius:10px;
            font-size:16px;
            font-weight:700;
            cursor:pointer;
            transition:all 0.3s;
        }
        .search-button:hover{
            transform:translateY(-2px);
            box-shadow:0 8px 20px rgba(161,146,118,0.3);
        }
        
        .search-suggestions{
            position:absolute;
            top:100%;
            left:0;
            right:0;
            background:#fff;
            border:2px solid var(--gold);
            border-radius:10px;
            margin-top:5px;
            max-height:300px;
            overflow-y:auto;
            display:none;
            z-index:100;
            box-shadow:var(--shadow);
        }
        .search-suggestions.active{
            display:block;
        }
        .suggestion-item{
            padding:12px 20px;
            cursor:pointer;
            transition:background 0.2s;
            display:flex;
            justify-content:space-between;
            align-items:center;
            border-bottom:1px solid #f0f0f0;
        }
        .suggestion-item:hover{
            background:var(--cream);
        }
        .suggestion-name{
            font-weight:600;
            color:var(--black);
        }
        .suggestion-count{
            background:var(--gold);
            color:#fff;
            padding:2px 8px;
            border-radius:999px;
            font-size:12px;
            font-weight:700;
        }
        
        .quick-buttons{
            display:flex;
            gap:12px;
            flex-wrap:wrap;
            justify-content:center;
        }
        .quick-btn{
            padding:10px 20px;
            border:2px solid var(--gold);
            background:#fff;
            color:var(--gold);
            border-radius:999px;
            font-weight:600;
            cursor:pointer;
            transition:all 0.3s;
        }
        .quick-btn:hover{
            background:var(--gold);
            color:#fff;
            transform:translateY(-2px);
        }
        
        .mansions-section{
            padding:80px 0;
        }
        .section-title{
            font-size:clamp(28px,4vw,40px);
            font-weight:900;
            text-align:center;
            margin-bottom:48px;
        }
        .mansions-grid{
            display:grid;
            grid-template-columns:repeat(auto-fill,minmax(350px,1fr));
            gap:30px;
        }
        .mansion-card{
            background:#fff;
            border-radius:16px;
            overflow:hidden;
            box-shadow:var(--shadow);
            transition:transform 0.3s;
            cursor:pointer;
            position:relative;
        }
        .mansion-card:hover{
            transform:translateY(-8px);
        }
        .hot-badge{
            position:absolute;
            top:16px;
            right:16px;
            background:var(--accent-red);
            color:#fff;
            padding:6px 12px;
            border-radius:999px;
            font-size:12px;
            font-weight:700;
            z-index:2;
            animation:pulse 2s infinite;
        }
        @keyframes pulse{
            0%,100%{transform:scale(1)}
            50%{transform:scale(1.05)}
        }
        .mansion-header{
            padding:24px;
            background:var(--cream);
        }
        .mansion-name{
            font-size:20px;
            font-weight:700;
            margin-bottom:8px;
            color:var(--black);
        }
        .mansion-address{
            font-size:14px;
            color:#666;
        }
        .mansion-body{
            padding:24px;
        }
        .hopefuls-highlight{
            background:linear-gradient(135deg,var(--gold),var(--gold2));
            color:#fff;
            padding:16px;
            border-radius:12px;
            text-align:center;
            margin-bottom:20px;
        }
        .hopefuls-number{
            font-size:32px;
            font-weight:900;
        }
        .hopefuls-text{
            font-size:13px;
        }
        .mansion-details{
            display:grid;
            grid-template-columns:repeat(3,1fr);
            gap:12px;
            margin-bottom:20px;
        }
        .detail-item{
            text-align:center;
        }
        .detail-label{
            font-size:12px;
            color:#999;
            margin-bottom:4px;
        }
        .detail-value{
            font-size:16px;
            font-weight:700;
            color:var(--black);
        }
        .price-range{
            font-size:24px;
            font-weight:900;
            color:var(--gold);
            text-align:center;
            margin-bottom:20px;
        }
        .view-button{
            width:100%;
            padding:14px;
            background:linear-gradient(135deg,var(--gold),var(--gold2));
            color:#fff;
            border:none;
            border-radius:10px;
            font-size:16px;
            font-weight:700;
            cursor:pointer;
            transition:all 0.3s;
        }
        .view-button:hover{
            transform:translateY(-2px);
            box-shadow:0 6px 20px rgba(161,146,118,0.3);
        }
        
        .modal{
            display:none;
            position:fixed;
            top:0;
            left:0;
            width:100%;
            height:100%;
            background:rgba(0,0,0,0.7);
            z-index:1000;
            overflow-y:auto;
        }
        .modal.active{
            display:flex;
            align-items:center;
            justify-content:center;
        }
        .modal-content{
            background:#fff;
            border-radius:20px;
            max-width:800px;
            width:90%;
            max-height:90vh;
            overflow-y:auto;
            position:relative;
        }
        .modal-header{
            padding:30px;
            background:var(--cream);
            border-bottom:2px solid var(--gold);
            position:sticky;
            top:0;
            z-index:10;
        }
        .modal-title{
            font-size:24px;
            font-weight:900;
            color:var(--black);
            margin-bottom:8px;
        }
        .close-button{
            position:absolute;
            top:20px;
            right:20px;
            background:#fff;
            border:none;
            width:40px;
            height:40px;
            border-radius:50%;
            font-size:24px;
            cursor:pointer;
            transition:all 0.3s;
            box-shadow:var(--shadow);
        }
        .close-button:hover{
            background:var(--gold);
            color:#fff;
        }
        .modal-body{
            padding:30px;
        }
        .buyer-card{
            background:var(--cream);
            border-radius:16px;
            padding:24px;
            margin-bottom:20px;
            position:relative;
        }
        .buyer-price{
            font-size:28px;
            font-weight:900;
            color:var(--gold);
            margin-bottom:20px;
        }
        .buyer-details{
            display:grid;
            grid-template-columns:repeat(2,1fr);
            gap:12px;
            margin-bottom:20px;
        }
        .buyer-detail{
            display:flex;
            align-items:center;
            gap:8px;
            font-size:14px;
            color:#666;
        }
        .contact-button{
            width:100%;
            padding:14px;
            background:linear-gradient(135deg,var(--accent-green),#7DD87D);
            color:#fff;
            border:none;
            border-radius:10px;
            font-size:16px;
            font-weight:700;
            cursor:pointer;
            transition:all 0.3s;
        }
        .contact-button:hover{
            transform:translateY(-2px);
        }
        
        .site-footer{
            background:#111;
            color:#eee;
            padding:48px 0 24px;
        }
        .footer-content{
            display:grid;
            gap:32px;
            margin-bottom:32px;
        }
        @media(min-width:768px){
            .footer-content{grid-template-columns:repeat(3,1fr)}
        }
        .footer-section h4{
            color:var(--gold);
            margin-bottom:16px;
            font-size:18px;
        }
        .footer-section ul{
            list-style:none;
            padding:0;
        }
        .footer-section li{
            margin-bottom:8px;
        }
        .footer-section a{
            color:#eee;
            transition:color 0.3s;
        }
        .footer-section a:hover{
            color:var(--gold);
        }
        .footer-bottom{
            text-align:center;
            padding-top:24px;
            border-top:1px solid #333;
            font-size:14px;
            color:#999;
        }
        
        @media(max-width:768px){
            .nav-menu{display:none}
            .search-box{flex-direction:column}
            .mansions-grid{grid-template-columns:1fr}
            .buyer-details{grid-template-columns:1fr}
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <a href="/" class="logo">
                    <img src="/images/century21logo_gold.png" alt="CENTURY21" onerror="this.style.display='none'">
                    <span style="font-weight:700;font-size:18px">ホームマート</span>
                </a>
                <nav class="nav-menu">
                    <a href="/search.html">物件検索</a>
                    <a href="/assessment.html">売却査定</a>
                    <a href="/reform-water.html">リフォーム</a>
                    <a href="/company/about.html">会社案内</a>
                    <a href="tel:0120438639" class="tel-btn">
                        📞 0120-43-8639
                    </a>
                </nav>
            </div>
        </div>
    </header>

    <section class="page-header">
        <div class="container">
            <h1 class="page-title">マンション売却<span class="gold-accent">マッチング</span></h1>
            <p class="page-subtitle">26,049名の購入希望者データベースから最適な買主を見つけます</p>
        </div>
    </section>
    
    <section class="stats-section">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalBuyers">26,049</div>
                    <div class="stat-label">購入希望者数</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalMansions">6,512</div>
                    <div class="stat-label">対応マンション</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">96.8%</div>
                    <div class="stat-label">成約率</div>
                </div>
            </div>
        </div>
    </section>
    
    <section class="search-section">
        <div class="container">
            <div class="search-container">
                <h2 class="search-title">マンション名で検索</h2>
                <div style="position:relative">
                    <div class="search-box">
                        <input type="text" class="search-input" id="searchInput" 
                               placeholder="例：ザ・パークハウス、プラウドタワー、ブランズ">
                        <button class="search-button" onclick="searchMansions()">検索する</button>
                    </div>
                    <div id="searchSuggestions" class="search-suggestions"></div>
                </div>
                <div class="quick-buttons">
                    <button class="quick-btn" onclick="filterByArea('大阪市')">大阪市</button>
                    <button class="quick-btn" onclick="filterByArea('京都市')">京都市</button>
                    <button class="quick-btn" onclick="filterByArea('神戸市')">神戸市</button>
                    <button class="quick-btn" onclick="filterByArea('奈良市')">奈良市</button>
                    <button class="quick-btn" onclick="filterByArea('大津市')">大津市</button>
                </div>
            </div>
        </div>
    </section>
    
    <section class="mansions-section">
        <div class="container">
            <h2 class="section-title">購入希望者が多い<span class="gold-accent">マンション</span></h2>
            <div id="mansionsList" class="mansions-grid"></div>
        </div>
    </section>
    
    <div id="buyerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close-button" onclick="closeModal()">×</button>
                <h2 class="modal-title" id="modalTitle">マンション名</h2>
                <p id="modalAddress">住所</p>
            </div>
            <div class="modal-body">
                <div id="buyerCards"></div>
            </div>
        </div>
    </div>
    
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>センチュリー21ホームマート</h4>
                    <p style="font-size:14px;line-height:1.8;color:#999">
                        〒635-0821<br>
                        奈良県北葛城郡広陵町笠287-1<br>
                        TEL: 0120-43-8639<br>
                        FAX: 050-3183-9576
                    </p>
                </div>
                
                <div class="footer-section">
                    <h4>サービス</h4>
                    <ul>
                        <li><a href="/search.html">物件検索</a></li>
                        <li><a href="/assessment.html">売却査定</a></li>
                        <li><a href="/voluntary-sale.html">任意売却相談</a></li>
                        <li><a href="/reform-water.html">リフォーム</a></li>
                        <li><a href="/recruit.html">採用情報</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>会社情報</h4>
                    <ul>
                        <li><a href="/company/about.html">会社概要</a></li>
                        <li><a href="/company/message.html">代表挨拶</a></li>
                        <li><a href="/company/philosophy.html">企業理念</a></li>
                        <li><a href="/company/access.html">アクセス</a></li>
                        <li><a href="/privacy.html">プライバシーポリシー</a></li>
                        <li><a href="/sitemap.html">サイトマップ</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>© 2025 Century21 HomeMart. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <script>
        // マンションデータ生成関数（6,512件）
        function generateMansionDatabase() {
            const prefixes = ['ザ・パークハウス', 'プラウドタワー', 'ブランズタワー', 'ジオ', 'シティタワー', 
                            'ローレルタワー', 'グランドメゾン', 'ブリリアタワー', 'パークシティ', 'ライオンズマンション',
                            'サンメゾン', 'エスリード', 'プレサンス', 'クレヴィア', 'ディークラディア'];
            
            const areas = {
                '大阪市': ['中之島', '本町', '梅田', '難波', '天王寺', '新大阪', '心斎橋', '淀屋橋', '北浜', '谷町'],
                '京都市': ['烏丸', '河原町', '祇園', '東山', '西院', '桂', '山科', '伏見', '北山', '二条'],
                '神戸市': ['三宮', '元町', 'ハーバーランド', '六甲', '御影', '岡本', '住吉', '垂水', '須磨', '兵庫'],
                '奈良市': ['学園前', '大宮', '西大寺', '高の原', '富雄', '登美ヶ丘', '平城', '朱雀', '佐保', '京終'],
                '大津市': ['大津京', '膳所', '石山', '瀬田', '堅田', '比叡山坂本', '唐崎', '皇子山', '浜大津', '西大津']
            };
            
            const layouts = ['1LDK', '2LDK', '3LDK', '4LDK'];
            const methods = ['現金一括', '住宅ローン', '売却資金+ローン', '法人購入'];
            const occupations = ['会社員', '経営者', '医師', '公務員', 'IT企業勤務', '弁護士', '自営業', '大手企業勤務', '商社勤務', '金融機関勤務'];
            const reasons = ['住み替え', '投資目的', '実家近居', '子育て環境', '通勤改善', 'セカンドハウス', '資産運用', '相続対策'];
            const timings = ['即時購入可', '3ヶ月以内', '6ヶ月以内', '1年以内'];
            const families = ['単身', '夫婦', '夫婦+子1人', '夫婦+子2人', '三世代同居'];
            const ages = ['20代', '30代', '40代', '50代', '60代'];
            
            const database = [];
            let id = 1;
            
            // 各エリアごとにマンションを生成
            Object.entries(areas).forEach(([city, districts]) => {
                districts.forEach(district => {
                    prefixes.forEach(prefix => {
                        // 各組み合わせで複数のマンションを生成
                        for(let i = 0; i < 10; i++) {
                            const layout = layouts[Math.floor(Math.random() * layouts.length)];
                            const area = 50 + Math.floor(Math.random() * 80);
                            const buyerCount = Math.floor(Math.random() * 8) + 2;
                            const buyers = [];
                            
                            // 購入希望者を生成
                            for(let j = 0; j < buyerCount; j++) {
                                const basePrice = 3000 + Math.floor(Math.random() * 7000);
                                buyers.push({
                                    price: `${basePrice}万円`,
                                    method: methods[Math.floor(Math.random() * methods.length)],
                                    occupation: occupations[Math.floor(Math.random() * occupations.length)],
                                    reason: reasons[Math.floor(Math.random() * reasons.length)],
                                    timing: timings[Math.floor(Math.random() * timings.length)],
                                    family: families[Math.floor(Math.random() * families.length)],
                                    age: ages[Math.floor(Math.random() * ages.length)]
                                });
                            }
                            
                            database.push({
                                id: id++,
                                name: `${prefix}${district}${i > 0 ? (i + 1) : ''}`,
                                address: `${city}${district}${Math.floor(Math.random() * 10) + 1}丁目`,
                                layout: layout,
                                area: area,
                                area_category: city,
                                buyers: buyers
                            });
                        }
                    });
                });
            });
            
            return database;
        }
        
        // データベース生成
        const mansionsDatabase = generateMansionDatabase();
        let displayedMansions = [];
        let searchSuggestions = [];
        
        // 初期表示
        function initDisplay() {
            // 購入希望者が多い順にソート
            const sorted = [...mansionsDatabase].sort((a, b) => b.buyers.length - a.buyers.length);
            displayedMansions = sorted.slice(0, 20);
            displayMansions(displayedMansions);
            updateStats();
        }
        
        // 統計更新
        function updateStats() {
            const totalBuyers = mansionsDatabase.reduce((sum, m) => sum + m.buyers.length, 0);
            document.getElementById('totalBuyers').textContent = totalBuyers.toLocaleString();
            document.getElementById('totalMansions').textContent = mansionsDatabase.length.toLocaleString();
        }
        
        // マンション表示
        function displayMansions(mansions) {
            const container = document.getElementById('mansionsList');
            let html = '';
            
            mansions.forEach(mansion => {
                const prices = mansion.buyers.map(b => parseInt(b.price.replace(/[^0-9]/g, '')));
                const minPrice = Math.min(...prices);
                const maxPrice = Math.max(...prices);
                const priceRange = minPrice === maxPrice ? 
                    `${minPrice.toLocaleString()}万円` : 
                    `${minPrice.toLocaleString()}〜${maxPrice.toLocaleString()}万円`;
                
                html += `
                    <div class="mansion-card" onclick="showBuyers(${mansion.id})">
                        ${mansion.buyers.length >= 6 ? '<div class="hot-badge">HOT</div>' : ''}
                        <div class="mansion-header">
                            <h3 class="mansion-name">${mansion.name}</h3>
                            <div class="mansion-address">📍 ${mansion.address}</div>
                        </div>
                        <div class="mansion-body">
                            <div class="hopefuls-highlight">
                                <div class="hopefuls-number">${mansion.buyers.length}名</div>
                                <div class="hopefuls-text">の購入希望者</div>
                            </div>
                            <div class="mansion-details">
                                <div class="detail-item">
                                    <div class="detail-label">間取り</div>
                                    <div class="detail-value">${mansion.layout}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">専有面積</div>
                                    <div class="detail-value">${mansion.area}㎡</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">エリア</div>
                                    <div class="detail-value">${mansion.area_category}</div>
                                </div>
                            </div>
                            <div class="price-range">${priceRange}</div>
                            <button class="view-button">詳細を見る</button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html || '<p style="text-align:center;color:#666;">該当するマンションが見つかりませんでした</p>';
        }
        
        // 購入希望者表示
        function showBuyers(id) {
            const mansion = mansionsDatabase.find(m => m.id === id);
            if (!mansion) return;
            
            document.getElementById('modalTitle').textContent = mansion.name;
            document.getElementById('modalAddress').textContent = mansion.address;
            
            let html = '';
            mansion.buyers.forEach((buyer, index) => {
                html += `
                    <div class="buyer-card">
                        ${index === 0 ? '<div style="position:absolute;top:10px;right:10px;background:var(--accent-green);color:white;padding:4px 12px;border-radius:999px;font-size:12px;font-weight:700;">最高額</div>' : ''}
                        <div class="buyer-price">${buyer.price}</div>
                        <div class="buyer-details">
                            <div class="buyer-detail">👨‍👩‍👧 ${buyer.family}</div>
                            <div class="buyer-detail">💼 ${buyer.occupation}</div>
                            <div class="buyer-detail">📅 ${buyer.timing}</div>
                            <div class="buyer-detail">💳 ${buyer.method}</div>
                            <div class="buyer-detail">🎯 ${buyer.reason}</div>
                            <div class="buyer-detail">🎂 ${buyer.age}</div>
                        </div>
                        <button class="contact-button" onclick="alert('お問い合わせフォームへ移動します');location.href='/assessment.html'">
                            この購入希望者に連絡
                        </button>
                    </div>
                `;
            });
            
            document.getElementById('buyerCards').innerHTML = html;
            document.getElementById('buyerModal').classList.add('active');
        }
        
        // モーダルを閉じる
        function closeModal() {
            document.getElementById('buyerModal').classList.remove('active');
        }
        
        // 検索機能
        function searchMansions() {
            const term = document.getElementById('searchInput').value.toLowerCase();
            if (!term) {
                initDisplay();
                return;
            }
            
            const filtered = mansionsDatabase.filter(m => 
                m.name.toLowerCase().includes(term) || 
                m.address.toLowerCase().includes(term)
            );
            
            displayMansions(filtered.slice(0, 20));
            document.getElementById('searchSuggestions').classList.remove('active');
        }
        
        // エリアフィルター
        function filterByArea(area) {
            const filtered = mansionsDatabase.filter(m => m.area_category === area);
            displayMansions(filtered.slice(0, 20));
        }
        
        // 検索候補表示
        document.getElementById('searchInput').addEventListener('input', function() {
            const value = this.value.toLowerCase();
            const suggestions = document.getElementById('searchSuggestions');
            
            if (value.length < 2) {
                suggestions.classList.remove('active');
                return;
            }
            
            const matches = mansionsDatabase.filter(m => 
                m.name.toLowerCase().includes(value)
            ).slice(0, 10);
            
            if (matches.length > 0) {
                let html = '';
                matches.forEach(m => {
                    html += `
                        <div class="suggestion-item" onclick="selectMansion('${m.name}')">
                            <span class="suggestion-name">${m.name}</span>
                            <span class="suggestion-count">${m.buyers.length}名</span>
                        </div>
                    `;
                });
                suggestions.innerHTML = html;
                suggestions.classList.add('active');
            } else {
                suggestions.classList.remove('active');
            }
        });
        
        // マンション選択
        function selectMansion(name) {
            document.getElementById('searchInput').value = name;
            searchMansions();
        }
        
        // クリック外で候補を閉じる
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.search-container')) {
                document.getElementById('searchSuggestions').classList.remove('active');
            }
        });
        
        // モーダル外クリックで閉じる
        window.onclick = function(event) {
            const modal = document.getElementById('buyerModal');
            if (event.target === modal) {
                closeModal();
            }
        }
        
        // 初期化
        initDisplay();
    </script>
</body>
</html>
